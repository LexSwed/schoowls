# Migration `20200704140647`

This migration has been generated by Alexander Swed at 7/4/2020, 2:06:47 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
PRAGMA foreign_keys=OFF;

DROP INDEX "quaint"."User_accountId"

CREATE TABLE "quaint"."new_User" (
"alias" TEXT   ,"disabled" BOOLEAN   ,"email" TEXT NOT NULL  ,"id" INTEGER NOT NULL  PRIMARY KEY AUTOINCREMENT,"lastActivityAt" DATE   ,"name" TEXT   ,"phoneNumber" TEXT   ,"registeredAt" DATE NOT NULL  )

INSERT INTO "quaint"."new_User" ("alias", "email", "id", "name", "phoneNumber") SELECT "alias", "email", "id", "name", "phoneNumber" FROM "quaint"."User"

PRAGMA foreign_keys=off;
DROP TABLE "quaint"."User";;
PRAGMA foreign_keys=on

ALTER TABLE "quaint"."new_User" RENAME TO "User";

PRAGMA foreign_keys=off;
DROP TABLE "quaint"."Account";;
PRAGMA foreign_keys=on

PRAGMA "quaint".foreign_key_check;

PRAGMA foreign_keys=ON;
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200704135930..20200704140647
--- datamodel.dml
+++ datamodel.dml
@@ -1,27 +1,20 @@
 datasource db {
     provider = "sqlite"
-    url = "***"
+    url = "***"
 }
 generator client {
     provider = "prisma-client-js"
 }
 // internal info
-model Account {
+model User {
     id             Int       @default(autoincrement()) @id
-    user           User
+    email          String
+    name           String?
+    alias          String?
+    phoneNumber    String?
     disabled       Boolean?
     registeredAt   DateTime
     lastActivityAt DateTime?
 }
-
-model User {
-    id          Int     @default(autoincrement()) @id
-    account     Account @relation(fields: [accountId], references: [id])
-    accountId   Int
-    email       String
-    name        String?
-    alias       String?
-    phoneNumber String?
-}
```


